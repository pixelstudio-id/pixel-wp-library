/*! For license information please see h-icon.js.LICENSE.txt */
(()=>{var e={342:()=>{},20:(e,t,o)=>{"use strict";var n=o(609),r=Symbol.for("react.element"),l=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,o){var n,s={},c=null,u=null;for(n in void 0!==o&&(c=""+o),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)l.call(t,n)&&!i.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:r,type:e,key:c,ref:u,props:s,_owner:a.current}}},848:(e,t,o)=>{"use strict";e.exports=o(20)},609:e=>{"use strict";e.exports=window.React}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,o),l.exports}(()=>{"use strict";o(342);const e=window.wp.blocks;var t=o(609);const n=window.wp.blockEditor,r=window.wp.components,l={API:{get(e,t={}){return window.fetch(e,{method:"GET",headers:{Accept:"application/json"},...t}).then(this._handleError).then(this._handleContentType).catch(this._throwError)},post(e,t,o={}){return window.fetch(e,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t),...o}).then(this._handleError).then(this._handleContentType).catch(this._throwError)},_handleError:e=>e.ok?e:Promise.reject(e.statusText),_handleContentType(e){const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():t&&t.includes("image/svg+xml")?Promise.resolve(e.text()):Promise.reject("Oops, we haven't got JSON!")},_throwError(e){throw new Error(e)}}};class a extends React.Component{constructor(){super(),this.abortController=new AbortController,this.timer=null,this.state={markup:null}}render(){return this.state.markup?(0,t.createElement)("span",{className:"h-svg-inline",dangerouslySetInnerHTML:{__html:this.state.markup}}):(0,t.createElement)("span",{className:"h-svg-inline"},"Icon not found")}componentDidMount(){this._getMarkup(this.props.src)}componentDidUpdate(e,t){this.props.src!==e.src&&(clearTimeout(this.timer),this.timer=setTimeout((()=>{this._getMarkup(this.props.src)}),1e3))}async _getMarkup(e){let t=localStorage.getItem(e);t||(t=await l.API.get(e,{signal:this.abortController.signal}),t&&localStorage.setItem(e,t)),this.props.onFound(t),this.setState({markup:t})}componentWillUnmount(){this.abortController.abort()}}const i=window.wp.i18n,s=window.wp.element,c=window.wp.keycodes,u=window.wp.primitives;var m=o(848);const p=(0,m.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,m.jsx)(u.Path,{d:"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z"})}),h=(0,m.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,m.jsx)(u.Path,{d:"M17.031 4.703 15.576 4l-1.56 3H14v.03l-2.324 4.47H9.5V13h1.396l-1.502 2.889h-.95a3.694 3.694 0 0 1 0-7.389H10V7H8.444a5.194 5.194 0 1 0 0 10.389h.17L7.5 19.53l1.416.719L15.049 8.5h.507a3.694 3.694 0 0 1 0 7.39H14v1.5h1.556a5.194 5.194 0 0 0 .273-10.383l1.202-2.304Z"})}),g=function({isSelected:e,url:o,setAttributes:l,opensInNewTab:a,onToggleOpenInNewTab:u}){const[m,g]=(0,s.useState)(!1),d=!!o,b=d&&e,w=()=>(g(!0),!1),k=()=>{l({url:void 0,linkTarget:void 0,rel:void 0}),g(!1)},C=(m||b)&&(0,t.createElement)(r.Popover,{position:"bottom center",onClose:()=>g(!1)},(0,t.createElement)(n.__experimentalLinkControl,{className:"wp-block-navigation-link__inline-link-input",value:{url:o,opensInNewTab:a},onChange:({url:e="",opensInNewTab:t})=>{l({url:e}),a!==t&&u(t)}}));return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.BlockControls,null,(0,t.createElement)(r.ToolbarGroup,null,!d&&(0,t.createElement)(r.ToolbarButton,{name:"link",icon:p,title:(0,i.__)("Link"),shortcut:c.displayShortcut.primary("k"),onClick:w}),b&&(0,t.createElement)(r.ToolbarButton,{name:"link",icon:h,title:(0,i.__)("Unlink"),shortcut:c.displayShortcut.primaryShift("k"),onClick:k,isActive:!0}))),e&&(0,t.createElement)(r.KeyboardShortcuts,{bindGlobal:!0,shortcuts:{[c.rawShortcut.primary("k")]:w,[c.rawShortcut.primaryShift("k")]:k}}),C)};(0,e.registerBlockType)("h/icon",{title:"Icon",description:"Icon with texts",icon:"id",category:"layout",example:{},attributes:window.hLocalizeIcon.defaultAtts,styles:[{name:"boxed",label:"Boxed"}],edit:function(e){let o=e.attributes,l=["core/bold","core/italic","core/strikethrough","core/subscript","core/superscript","core/image","core/text-color","core/code"];o.isFullyClickable||l.push("core/link");let i=`${e.className}\n    has-icon-position-${o.iconPosition}\n    has-text-align-${o.align}\n    ${"none"===o.bgColor?"":"has-background"}\n    ${"<p></p>"===o.description||""===o.description?"has-no-description":"has-description"}\n    ${o.useImage?"use-image":""}`,s=!o.useRawSVG&&!o.useImage,c=[{label:"Text Color",value:o.textColor,onChange:t=>{e.setAttributes({textColor:t||""})}},{label:"Background Color",value:o.bgColor,onChange:t=>{e.setAttributes({bgColor:t||""})}}];return o.useImage||c.push({label:"Icon Color",value:o.iconColor,onChange:t=>{e.setAttributes({iconColor:t||""})}}),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.InspectorControls,null,(0,t.createElement)(r.PanelBody,{title:"Settings",initialOpen:"true"},(0,t.createElement)(r.ToggleControl,{label:"Is Fully Clickable?",checked:o.isFullyClickable,onChange:function(t){let n={isFullyClickable:t};if(t){let e=o.heading.replace(/<\/?a[^>]*>/g,""),t=o.description.replace(/<\/?a[^>]*>/g,"");n.heading=e,n.description=t}e.setAttributes(n)}}),s&&(0,t.createElement)("div",{className:"h-icon-control"},(0,t.createElement)("div",null,(0,t.createElement)(r.TextControl,{label:"Icon Name",value:o.iconName,onChange:function(t){e.setAttributes({iconName:t})}}),(0,t.createElement)("small",{style:{display:"block",marginTop:"-1.5rem"}},"Visit here to see list of icons: ",(0,t.createElement)("a",{href:"https://fontawesome.com/v5/search?m=free&s=solid",target:"_blank"},"FontAwesome.com"))),(0,t.createElement)(a,{src:hLocalizeIcon.iconURL+"/"+o.iconName+".svg",onFound:t=>e.setAttributes({iconMarkup:t})})),(0,t.createElement)(r.ToggleControl,{label:"Use Raw SVG?",checked:o.useRawSVG,onChange:t=>e.setAttributes({useRawSVG:t,useImage:!1})}),o.useRawSVG&&(0,t.createElement)(r.TextareaControl,{label:"Raw SVG",value:o.iconMarkup,help:"Paste in the SVG code here",onChange:t=>e.setAttributes({iconMarkup:t})}),(0,t.createElement)(r.ToggleControl,{label:"Use Image?",checked:o.useImage,onChange:t=>e.setAttributes({useImage:t,useRawSVG:!1,iconMarkup:""})}),o.useImage&&(0,t.createElement)(n.MediaUpload,{allowedTypes:"image",value:o.mediaID,onSelect:function(t){e.setAttributes({imageURL:t.url,imageID:t.id})},render:function(e){let n=o.imageID?"button button--transparent":"button";return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(r.Button,{className:n,onClick:e.open},o.imageID?"Change Image":"Upload Image"),o.imageID&&(0,t.createElement)("img",{class:"wp-block-h-icon__image-preview",src:o.imageURL}))}})),(0,t.createElement)(n.PanelColorSettings,{title:"Color",initialOpen:"true",colorSettings:c})),(0,t.createElement)(n.BlockControls,null,(0,t.createElement)(r.ToolbarGroup,null,(0,t.createElement)(r.ToolbarButton,{icon:"table-col-before",title:"Icon on Left",className:"left"==o.iconPosition?"is-pressed":"",onClick:()=>e.setAttributes({iconPosition:"left"})}),(0,t.createElement)(r.ToolbarButton,{icon:"table-row-before",title:"Icon on Top",className:"top"==o.iconPosition?"is-pressed":"",onClick:()=>e.setAttributes({iconPosition:"top"})}),(0,t.createElement)(r.ToolbarButton,{icon:"table-col-after",title:"Icon on Right",className:"right"==o.iconPosition?"is-pressed":"",onClick:()=>e.setAttributes({iconPosition:"right"})})),(0,t.createElement)(n.AlignmentToolbar,{value:o.align,onChange:t=>e.setAttributes({align:t||"none"})})),o.isFullyClickable&&(0,t.createElement)(g,{url:o.url,setAttributes:e.setAttributes,isSelected:e.isSelected,opensInNewTab:"_blank"===o.linkTarget,onToggleOpenInNewTab:t=>{let o=t?"_blank":void 0;e.setAttributes({linkTarget:o})}}),(0,t.createElement)("div",{className:i,style:{"--textColor":o.textColor,"--bgColor":o.bgColor,"--iconColor":o.iconColor}},o.useImage?(0,t.createElement)("figure",{className:"wp-block-h-icon__figure"},(0,t.createElement)("img",{src:o.imageURL})):(0,t.createElement)("figure",{className:"wp-block-h-icon__figure",dangerouslySetInnerHTML:{__html:o.iconMarkup}}),(0,t.createElement)("dl",{className:"wp-block-h-icon__content"},(0,t.createElement)(n.RichText,{tagName:"dt",inline:!0,placeholder:"Enter title…",value:o.heading,allowedFormats:l,onChange:t=>e.setAttributes({heading:t})}),(0,t.createElement)(n.RichText,{tagName:"dd",multiline:"p",placeholder:"Enter description…",value:o.description,allowedFormats:l,onChange:t=>e.setAttributes({description:t})}))))}})})()})();
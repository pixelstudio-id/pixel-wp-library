/*! For license information please see px-icon.js.LICENSE.txt */
(()=>{var e={304:()=>{},20:(e,t,o)=>{"use strict";var n=o(609),r=Symbol.for("react.element"),l=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,o){var n,s={},c=null,p=null;for(n in void 0!==o&&(c=""+o),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(p=t.ref),t)l.call(t,n)&&!i.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:r,type:e,key:c,ref:p,props:s,_owner:a.current}}},848:(e,t,o)=>{"use strict";e.exports=o(20)},609:e=>{"use strict";e.exports=window.React}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,o),l.exports}(()=>{"use strict";o(304);const e=window.wp.blocks;var t=o(609);const n=window.wp.blockEditor,r=window.wp.components,l={get(e,t={}){return window.fetch(e,{method:"GET",headers:{Accept:"application/json"},...t}).then(this._handleError).then(this._handleContentType).catch(this._throwError)},post(e,t,o={}){return window.fetch(e,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t),...o}).then(this._handleError).then(this._handleContentType).catch(this._throwError)},_handleError:e=>e.ok?e:Promise.reject(e.statusText),_handleContentType(e){const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():t&&t.includes("image/svg+xml")?Promise.resolve(e.text()):Promise.reject("Oops, we haven't got JSON!")},_throwError(e){throw new Error(e)}};class a extends React.Component{constructor(){super(),this.abortController=new AbortController,this.timer=null,this.state={markup:null}}render(){return this.state.markup?(0,t.createElement)("span",{className:"px-svg-inline",dangerouslySetInnerHTML:{__html:this.state.markup}}):(0,t.createElement)("span",{className:"px-svg-inline"},"Icon not found")}componentDidMount(){this._getMarkup(this.props.src)}componentDidUpdate(e,t){this.props.src!==e.src&&(clearTimeout(this.timer),this.timer=setTimeout((()=>{this._getMarkup(this.props.src)}),1e3))}async _getMarkup(e){let t=localStorage.getItem(e);t||(t=await l.get(e),t&&localStorage.setItem(e,t)),this.props.onFound(t),this.setState({markup:t})}componentWillUnmount(){this.abortController.abort()}}const i=window.wp.i18n,s=window.wp.element,c=window.wp.keycodes,p=window.wp.primitives;var m=o(848);const u=(0,m.jsx)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,m.jsx)(p.Path,{d:"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z"})}),d=(0,m.jsx)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,m.jsx)(p.Path,{d:"M17.031 4.703 15.576 4l-1.56 3H14v.03l-2.324 4.47H9.5V13h1.396l-1.502 2.889h-.95a3.694 3.694 0 0 1 0-7.389H10V7H8.444a5.194 5.194 0 1 0 0 10.389h.17L7.5 19.53l1.416.719L15.049 8.5h.507a3.694 3.694 0 0 1 0 7.39H14v1.5h1.556a5.194 5.194 0 0 0 .273-10.383l1.202-2.304Z"})}),h=function({isSelected:e,url:o,setAttributes:l,opensInNewTab:a,onToggleOpenInNewTab:p}){const[m,h]=(0,s.useState)(!1),g=!!o,w=g&&e,b=()=>(h(!0),!1),k=()=>{l({url:void 0,linkTarget:void 0,rel:void 0}),h(!1)},E=(m||w)&&(0,t.createElement)(r.Popover,{position:"bottom center",onClose:()=>h(!1)},(0,t.createElement)(n.__experimentalLinkControl,{className:"wp-block-navigation-link__inline-link-input",value:{url:o,opensInNewTab:a},onChange:({url:e="",opensInNewTab:t})=>{l({url:e}),a!==t&&p(t)}}));return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.BlockControls,null,(0,t.createElement)(r.ToolbarGroup,null,!g&&(0,t.createElement)(r.ToolbarButton,{name:"link",icon:u,title:(0,i.__)("Link"),shortcut:c.displayShortcut.primary("k"),onClick:b}),w&&(0,t.createElement)(r.ToolbarButton,{name:"link",icon:d,title:(0,i.__)("Unlink"),shortcut:c.displayShortcut.primaryShift("k"),onClick:k,isActive:!0}))),e&&(0,t.createElement)(r.KeyboardShortcuts,{bindGlobal:!0,shortcuts:{[c.rawShortcut.primary("k")]:b,[c.rawShortcut.primaryShift("k")]:k}}),E)};function g({name:e,label:o,props:r}){const{attributes:l,setAttributes:a,clientId:i}=r,s=(0,n.useBlockProps)(),c=(0,n.__experimentalUseMultipleOriginColorsAndGradients)();s&&l[e]&&(s.style[`--${e}`]=l.iconColor);const p={label:o,colorValue:l[e],onColorChange:t=>{a({[e]:t})}};return(0,t.createElement)(n.InspectorControls,{group:"color"},(0,t.createElement)(n.__experimentalColorGradientSettingsDropdown,{__experimentalIsRenderedInSidebar:!0,disableCustomColors:!1,settings:[p],panelId:i,...c}))}(0,e.registerBlockType)("px/icon",{edit:function(e){const o=(0,n.useBlockProps)(),{attributes:l,setAttributes:i,isSelected:s}=e,c=l,p=["core/bold","core/italic","core/strikethrough","core/subscript","core/superscript","core/image","core/text-color","core/code"];c.isFullyClickable||p.push("core/link");let m=` has-icon-position-${c.iconPosition} `;m+="<p></p>"===c.description||""===c.description?"has-no-description ":"has-description ",m+=c.useImage?"use-image ":"",o.className+=m,c.iconColor&&(o.style["--iconColor"]=c.iconColor);const u=!c.useRawSVG&&!c.useImage;return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.InspectorControls,null,(0,t.createElement)(r.PanelBody,{title:"Settings",initialOpen:"true"},(0,t.createElement)(r.ToggleControl,{label:"Is Fully Clickable?",checked:c.isFullyClickable,onChange:function(e){const t={isFullyClickable:e};e&&(t.heading=c.heading.replace(/<\/?a[^>]*>/g,""),t.description=c.description.replace(/<\/?a[^>]*>/g,"")),i(t)}}),u&&(0,t.createElement)("div",{className:"px-icon-control"},(0,t.createElement)("div",null,(0,t.createElement)(r.TextControl,{label:"Icon Name",value:c.iconName,onChange:function(e){i({iconName:e})}}),(0,t.createElement)("small",{style:{display:"block",marginTop:"-1.5rem"}},"Visit here to see list of icons:",(0,t.createElement)("a",{href:`${window.pxLocalizeIcon.fontawesomeURL}`,target:"_blank",rel:"noreferrer"},"FontAwesome.com"))),(0,t.createElement)(a,{src:`${window.pxLocalizeIcon.iconURL}/${c.iconName}.svg`,onFound:e=>i({iconMarkup:e})})),(0,t.createElement)(r.ToggleControl,{label:"Use Raw SVG?",checked:c.useRawSVG,onChange:e=>i({useRawSVG:e,useImage:!1})}),c.useRawSVG&&(0,t.createElement)(r.TextareaControl,{label:"Raw SVG",value:c.iconMarkup,help:"Paste in the SVG code here",onChange:e=>i({iconMarkup:e})}),(0,t.createElement)(r.ToggleControl,{label:"Use Image?",checked:c.useImage,onChange:e=>i({useImage:e,useRawSVG:!1,iconMarkup:""})}),c.useImage&&(0,t.createElement)(n.MediaUpload,{allowedTypes:"image",value:c.mediaID,onSelect:function(e){i({imageURL:e.url,imageID:e.id})},render:function(e){const o=c.imageID?"button button--transparent":"button";return(0,t.createElement)("div",{className:"wp-block-px-icon__image-field"},(0,t.createElement)(r.Button,{className:o,onClick:e.open},c.imageID?"Change Image":"Upload Image"),c.imageID&&(0,t.createElement)("img",{className:"wp-block-px-icon__image-preview",src:c.imageURL,alt:""}))}}))),!c.useImage&&(0,t.createElement)(g,{label:"Icon Color",name:"iconColor",props:e}),(0,t.createElement)(n.BlockControls,null,(0,t.createElement)(r.ToolbarGroup,null,(0,t.createElement)(r.ToolbarButton,{icon:"table-col-before",title:"Icon on Left",className:"left"===c.iconPosition?"is-pressed":"",onClick:()=>i({iconPosition:"left"})}),(0,t.createElement)(r.ToolbarButton,{icon:"table-row-before",title:"Icon on Top",className:"top"===c.iconPosition?"is-pressed":"",onClick:()=>i({iconPosition:"top"})}),(0,t.createElement)(r.ToolbarButton,{icon:"table-col-after",title:"Icon on Right",className:"right"===c.iconPosition?"is-pressed":"",onClick:()=>i({iconPosition:"right"})}))),c.isFullyClickable&&(0,t.createElement)(h,{url:c.url,setAttributes:i,isSelected:s,opensInNewTab:"_blank"===c.linkTarget,onToggleOpenInNewTab:e=>{i({linkTarget:e?"_blank":void 0})}}),(0,t.createElement)("div",{...o},c.useImage?(0,t.createElement)("figure",{className:"wp-block-px-icon__figure"},(0,t.createElement)("img",{src:c.imageURL,alt:""})):(0,t.createElement)("figure",{className:"wp-block-px-icon__figure",dangerouslySetInnerHTML:{__html:c.iconMarkup}}),(0,t.createElement)("dl",{className:"wp-block-px-icon__content"},(0,t.createElement)(n.RichText,{tagName:"dt",inline:"true",placeholder:"Enter title…",value:c.heading,allowedFormats:p,onChange:e=>i({heading:e})}),(0,t.createElement)(n.RichText,{tagName:"dd",multiline:"p",placeholder:"Enter description…",value:c.description,allowedFormats:p,onChange:e=>i({description:e})}))))}})})()})();